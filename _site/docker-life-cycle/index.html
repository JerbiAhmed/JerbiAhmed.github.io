<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Managing the Life Cycle of Containers – Jerbi Ahmed</title>
    <meta name="description" content="Docker commands life cycle">
    <meta name="keywords" content="Openshift, Kubernetes, Docker, Orchestration, DevOps">
    <link rel="canonical" href="http://localhost:4000/docker-life-cycle/">
        <!-- Twitter Cards -->
    <meta name="twitter:title" content="Managing the Life Cycle of Containers">
    <meta name="twitter:description" content="Docker commands life cycle">
    <meta name="twitter:site" content="@jerbi_ahmed_">
    <meta name="twitter:creator" content="@jerbi_ahmed_">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="http://localhost:4000/assets/img/profile.png">
    <!-- Open Graph -->
    <meta property="og:locale" content="en_US">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Managing the Life Cycle of Containers">
    <meta property="og:description" content="Docker commands life cycle">
    <meta property="og:url" content="http://localhost:4000/docker-life-cycle/">
    <meta property="og:site_name" content="Jerbi Ahmed">
    <meta property="og:image" content="http://localhost:4000/assets/img/profile.png">

    
    
    <!-- Handheld -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/img/favicon/apple-touch-icon-144x144.png">
    <link rel="icon" type="image/png" href="http://localhost:4000/assets/img/favicon/favicon.png">
    <link rel="shortcut icon" href="http://localhost:4000/assets/img/favicon/favicon.ico">
    <!-- Feed -->
    <link rel="alternate" type="application/rss+xml" title="Jerbi Ahmed" href="http://localhost:4000/feed.xml">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/main.css">
</head>

  <body>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
      $(function() {
        i = 0;
        $('.menuAc').css({
          'color': 'rgba(52, 152, 219, 1)'
        });
        $('.menuAc').click(function(){
          $(this).next('.menuMobil').animate({width:'toggle'},350);
          if (i%2==0) {
            $('.footer').css({
              'filter'         : 'blur(5px)'
            });
            $('.yazilar').css({
              'filter'         : 'blur(5px)'
            });
            $('.ust').css({
              'filter'         : 'blur(5px)'
            });
            $('ul.menu').css({
              'animation-duration': '0.1s'
            });
            i++;
          }
          else {
            $('.footer').css({
              'filter'         : 'blur(0px)'
            });
            $('.yazilar').css({
              'filter'         : 'blur(0px)'
            });
            $('.ust').css({
              'filter'         : 'blur(0px)'
            });
            i++;
          }

        });
      });
    </script>
    <div class="menuAc">
      <i class="fa fa-bars" aria-hidden="true"></i>
    </div>
    <div class="menuMobil">
          <nav class="nav-home">
      <ul class="menu">
            
				    
				    <li><a class="link" href="http://localhost:4000/">Home</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/blog/">Blog</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/projects/">Projects</a></li>
				
				    
				    <li><a class="link" href="http://localhost:4000/about/">About</a></li>
				
        </ul>
    </nav>

    </div>
    <div class="ust">
      <div class="ortalaAna">
        <div class="baslikAna">
          Jerbi Ahmed
        </div>

        <div class="pc">
              <nav class="nav">
        <ul class="menuAna">
            
				    
				    <li class="item"><a class="link" href="http://localhost:4000/">Home</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/blog/">Blog</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/projects/">Projects</a></li>
				
				    
				    <li class="item"><a class="link" href="http://localhost:4000/about/">About</a></li>
				
        </ul>
    </nav>

        </div>
      </div>
    </div>
    <div class="ortalaAna">
      <div class="yazilar">
        <div class="yazi">
          <div class="ustr">
            <h2>Managing the Life Cycle of Containers</h2>
            <div class="yazibilgisi">
              15 Oct 2017.
            </div>
          </div>
          <hr>
          <div class="content">
            
<p>This tutorial series aims to provide you with an introduction to container and container orchestration technology using Docker, Kubernetes, and Red Hat OpenShift Container Platform.</p>

<p>This tutorial is Part 3 of my series on Red Hat Openshift. Check out the other articles:</p>

<ol>
  <li><a href="https://jerbiahmed.github.io/introduction">Fundamentals of Containers, Kubernetes, and Red Hat OpenShift : Tutorial introduction</a></li>
  <li><a href="https://jerbiahmed.github.io/setting-up-openshift-lab">Setting Up the Lab Environment</a></li>
  <li><a href="https://jerbiahmed.github.io/docker-overview/">Overview of the Docker Architecture</a></li>
  <li><a href="https://jerbiahmed.github.io/docker-life-cycle"><span style="color:red">Managing the Life Cycle of Containers</span></a></li>
  <li><a href="https://jerbiahmed.github.io/">Building Custom Container Images with Dockerfile</a></li>
  <li><a href="https://jerbiahmed.github.io/">Creating Kubernetes Resources</a></li>
  <li><a href="https://jerbiahmed.github.io/">Creating Applications with Source-to-Image facility of Red Hat OpenShift</a></li>
</ol>

<p>Let’s curry on with this section, we will se how to manage the life cycle of a container from creation to deletion.</p>

<h2 id="docker-client-verbs">Docker Client Verbs</h2>
<p>The Docker client, implemented by the docker command, provides a set of verbs to create and manage containers. The following figure shows a summary of the most commonly used verbs that change container state.</p>

<p class="image-pull-right"><img src="./../assets/img/06-docker_actions.png" alt="jekyll Image"></p>

<h2 id="managing-containers">Managing Containers</h2>

<p>Docker provides the following commands to manage containers:</p>

<ul>
  <li>
<strong>docker ps</strong>: This command is responsible for listing running containers</li>
</ul>

<div class="language-shell highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>docker ps -a
CONTAINER ID        IMAGE               COMMAND                 CREATED             STATUS                       PORTS               NAMES
4829d82fbbff        do180/httpd         <span class="s2">"httpd -D FOREGROUND"</span>   15 hours ago        Exited <span class="o">(</span>0<span class="o">)</span> 3 seconds ago                         my-httpd-container
</code></pre>
</div>

<ul>
  <li>
<strong>docker inspect</strong>: This command is responsible for listing metadata about a running or stopped container. The command produces a JSON output</li>
</ul>

<div class="language-shell highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>docker inspect my-httpd-container

<span class="o">{</span>
    <span class="s2">"Id"</span>: <span class="s2">"980e45b5376a4e966775fb49cbef47ee7bbd461be8bfd1a75c2cc5371676c8be"</span>,
...
    <span class="s2">"NetworkSettings"</span>: <span class="o">{</span>
        <span class="s2">"Bridge"</span>: <span class="s2">""</span>,
        <span class="s2">"EndpointID"</span>: <span class="s2">"483fc91363e5d877ea8f9696854a1f14710a085c6719afc858792154905d801a"</span>,
        <span class="s2">"Gateway"</span>: <span class="s2">"172.17.42.1"</span>,
        <span class="s2">"GlobalIPv6Address"</span>: <span class="s2">""</span>,
        <span class="s2">"GlobalIPv6PrefixLen"</span>: 0,
        <span class="s2">"HairpinMode"</span>: <span class="nb">false</span>,
        <span class="s2">"IPAddress"</span>: <span class="s2">"172.17.0.9"</span>,
...
<span class="o">}</span>
</code></pre>
</div>

<ul>
  <li>
<strong>docker stop</strong>: This command is responsible for stopping a running container gracefully</li>
  <li>
<strong>docker kill</strong>: This command is responsible for stopping a running container forcefully<br>
It is possible to specify the signal with the -s option
    <div class="language-shell highlighter-rouge">
<pre class="highlight"><code>docker <span class="nb">kill</span> -s SIGKILL my-httpd-container
</code></pre>
    </div>
  </li>
  <li>
<strong>docker restart</strong>: This command is responsible for restarting a stopped container</li>
  <li>
<strong>docker rm</strong>: This command is responsible for deleting a container, discarding its state and filesystem<br>
It is possible to delete all containers at the same time. The docker ps command has the -q option that returns only the ID of the containers.
    <div class="language-shell highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>docker stop <span class="k">$(</span>docker ps -q<span class="k">)</span>
<span class="gp">$ </span>docker rm <span class="k">$(</span>docker ps -aq<span class="k">)</span>
</code></pre>
    </div>
  </li>
</ul>

<h2 id="running-commands-in-a-container">Running Commands in a Container</h2>
<p>When a container is created, a default command is executed according to what is specified by the container image. However, it may be necessary to execute other commands to manage the running container.<br>
The <strong>docker exec</strong> command starts an additional process inside a running container:</p>
<div class="language-shell highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>sudo docker <span class="nb">exec</span> -it my-httpd-container /bin/bash
<span class="gp">$ </span>root@665b4a1e17b6:/#
</code></pre>
</div>
<p>Now you have started a bash shell inside your container you can run any shell command on it.</p>

<h2 id="managing-container-images">Managing Container Images</h2>
<ul>
  <li>
<strong>docker save</strong>: generates a file containing image metadata and preserves original image layers, so the original image can be later re-created exactly as it was.
    <div class="language-shell highlighter-rouge">
<pre class="highlight"><code>docker save <span class="o">[</span>-o FILE_NAME] IMAGE_NAME[:TAG]
</code></pre>
    </div>
  </li>
  <li>
<strong>docker load</strong>: restore the container image from a file
    <div class="language-shell highlighter-rouge">
<pre class="highlight"><code>docker load <span class="o">[</span>-i FILE_NAME]
</code></pre>
    </div>
  </li>
  <li>
<strong>docker rmi</strong>: delete an image from the cache
    <div class="language-shell highlighter-rouge">
<pre class="highlight"><code>docker <span class="o">[</span>OPTIONS] IMAGE
</code></pre>
    </div>
    <p>To delete all images that are not used by any container, use the following command:</p>
    <div class="language-shell highlighter-rouge">
<pre class="highlight"><code> docker rmi <span class="k">$(</span>docker images -q<span class="k">)</span>
</code></pre>
    </div>
  </li>
  <li>
<strong>docker diff</strong>: used to identify which files were changed, created, or deleted since the container was started
    <div class="language-shell highlighter-rouge">
<pre class="highlight"><code><span class="gp">$ </span>docker diff mysql-basic
C /run
C /run/mysqld
A /run/mysqld/mysqld.pid
A /run/mysqld/mysqld.sock
A /run/mysqld/mysqld.sock.lock
A /run/secrets
</code></pre>
    </div>

    <p>Any added file is marked with an A, and any changed file is marked with a C.</p>

    <p>To commit the changes to another image, run <strong>docker commit</strong>:</p>
    <div class="language-shell highlighter-rouge">
<pre class="highlight"><code>  <span class="nv">$ </span>docker commit mysql-basic mysql-custom
</code></pre>
    </div>
  </li>
</ul>

<p>Playing with images and containers is cool but <a href="https://jerbiahmed.github.io/">building custom container images with Dockerfiles</a> is even more fun!</p>


          </div>
        </div>
        <script src="http://localhost:4000/assets/js/jquery-1.12.2.min.js"></script>
<script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $.goup({
        trigger: 500,
        bottomOffset: 10,
        locationOffset: 20,
        containerRadius: 0,
        containerColor: '#fff',
        arrowColor: '#000',
        goupSpeed: 'normal'
    });
});
</script>


        
  <div id="disqus_thread" class="yazi">  </div>
  <script>

  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
  /*
  var disqus_config = function () {
  this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  */
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://ahmedjerbi.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

  <script id="dsq-count-scr" src="//ahmedjerbi.disqus.com/count.js" async></script>


      </div>
    </div>
        <div class="footer">
      <div class="ortalaAna">
        <div class="copy">
          Jerbi Ahmed © 2017
        </div>
        <div class="sosyal">
                        <div class="social-links">
                  <a href="mailto:jerbiahmed@outlook.com" class="author-social" target="_blank"><i class="fa fa-2x fa-envelope-square"></i></a>
                  <a href="http://twitter.com/jerbi_ahmed_" class="author-social" target="_blank"><i class="fa fa-2x fa-twitter-square"></i></a>
                  <a href="http://facebook.com/jerbia7med" class="author-social" target="_blank"><i class="fa fa-2x fa-facebook-square"></i></a>
                  
                  <a href="http://linkedin.com/in/jerbiahmed" class="author-social" target="_blank"><i class="fa fa-2x fa-linkedin-square"></i></a>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
            </div>

        </div>
      </div>
    </div>

  </body>
</html>
